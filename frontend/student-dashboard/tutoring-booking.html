<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Book Tutoring - SSPLP</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/student-features.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <nav class="navbar">
        <div class="container">
            <div class="nav-brand">
                <a href="student-dashboard.html">
                    <img src="logo..png" alt="SSPLP Logo" class="logo">
                    <span>SSPLP</span>
                </a>
            </div>
            <div class="nav-menu">
                <a href="student-dashboard.html" class="nav-link">Home</a>
                <a href="subjects.html" class="nav-link">Subjects</a>
                <a href="quizzes.html" class="nav-link">Quizzes</a>
                <a href="tutoring.html" class="nav-link active">Tutoring</a>
                <a href="messaging.html" class="nav-link">Messages</a>
                <a href="progress.html" class="nav-link">Progress</a>
            </div>
            <button id="logoutBtn" class="btn-signin">Logout</button>
        </div>
    </nav>

    <section class="dashboard">
        <div class="container">
            <h1>Book a Session</h1>
            
            <div class="card">
                <h2>Choose Your Tutor and Time</h2>
                <form id="bookingForm">
                    <div class="form-group">
                        <label>Tutor</label>
                        <select id="tutorSelect" required>
                            <option value="">Select a tutor</option>
                            <option value="tutor1">Mr. John - Mathematics</option>
                            <option value="tutor2">Ms. Sarah - English</option>
                            <option value="tutor3">Dr. Ahmed - Physics</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Session Type</label>
                        <select id="sessionType" required>
                            <option value="individual">Individual (1-on-1)</option>
                            <option value="group">Group Session</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Date & Time</label>
                        <input type="datetime-local" id="datetime" required>
                    </div>

                    <button type="submit" class="btn btn-primary">Book Session</button>
                </form>
            </div>

            <div class="card">
                <h2>Your Booked Sessions</h2>
                <div id="sessionsList"></div>
            </div>
        </div>
    </section>

    <script src="js/universal.js"></script>
    <script src="js/student-features.js"></script>
    <script src="js/app.js"></script>
    <script>
        // FR05: Virtual Tutoring Booking
        function loadSessions() {
            const sessions = StudentFeatures.getUpcomingSessions();
            const container = document.getElementById('sessionsList');
            
            container.innerHTML = sessions.length ? sessions.map(s => `
                <div class="session-item">
                    <div>
                        <strong>${s.type === 'individual' ? 'Individual' : 'Group'} Session</strong>
                        <p>${new Date(s.datetime).toLocaleString()}</p>
                        <small>Status: ${s.status}</small>
                    </div>
                    <a href="${s.meetLink}" class="btn btn-primary" target="_blank">
                        <i class="fas fa-video"></i> Join Session
                    </a>
                </div>
            `).join('') : '<p>No upcoming sessions</p>';
        }

        document.getElementById('bookingForm').addEventListener('submit', (e) => {
            e.preventDefault();
            
            const tutorId = document.getElementById('tutorSelect').value;
            const type = document.getElementById('sessionType').value;
            const datetime = document.getElementById('datetime').value;
            
            StudentFeatures.bookTutoring(tutorId, datetime, type);
            loadSessions();
            e.target.reset();
        });

        document.addEventListener('DOMContentLoaded', loadSessions);
    </script>
</body>
</html>
